<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BonjourArcade</title> <link rel="stylesheet" href="assets/css/style.css"> </head>
<body>
    <div class="container">
        <header>
            <div class="header-flex">
                <button id="random-game-btn" class="random-game-btn">Play Random Game</button>
                <h1>üïπÔ∏è BonjourArcade</h1>
                <div class="header-actions">
                    <a target="_blank" id="leaderboard-link"
                      href="https://felx.cc/leaderboard">Leaderboards</a>
                    <div class="game-launcher">
                        <input type="text" id="game-id-input" placeholder="Enter Game ID">
                        <button id="launch-game-btn">Launch</button>
                    </div>
                    <img src="assets/images/my_app_qr.png" alt="QR Code" class="static-qr-code">
                </div>
                <button id="theme-toggle-btn" style="margin-top:10px;font-size:1.5em;background:none;border:none;cursor:pointer;" aria-label="Switch theme">
                  <svg id="theme-toggle-icon" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;">
                    <circle cx="14" cy="14" r="12" stroke="#222" stroke-width="2" fill="#222"/>
                    <rect x="14" y="0" width="13" height="27" fill="#fff"/>
                  </svg>
                </button>
            </div>
        </header>

        <main class="main-content">
            <section id="game-of-the-week" class="featured-section">
                <h2>Game of the week</h2>
                <div id="featured-game-content">
                    <img id="featured-game-img"
                         src="" alt="Featured Game Cover">
                    <div id="featured-game-title" class="featured-title">
                        Loading...
                    </div>
                </div>
            </section>

            <section id="previous-games" class="grid-section">
                <div id="previous-games-grid" class="game-grid">
                    <p>Loading games...</p>
                </div>
            </section>
        </main>
    </div>

    <script src="assets/js/main.js"></script>
    <script>
    // Game launcher functionality
    document.getElementById('launch-game-btn').addEventListener('click', function() {
        const gameId = document.getElementById('game-id-input').value.trim();
        if (gameId) {
            window.location.href = `/play?game=${gameId}`;
        }
    });

    // Allow Enter key to launch game as well
    document.getElementById('game-id-input').addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            document.getElementById('launch-game-btn').click();
        }
    });

    // Theme toggling logic
    function setTheme(theme) {
        document.body.classList.remove('theme-light', 'theme-dark');
        document.body.classList.add(theme);
        // Update icon
        const icon = document.getElementById('theme-toggle-icon');
        if (icon) {
          if (theme === 'theme-dark') {
            icon.querySelector('circle').setAttribute('stroke', '#f4f4f4');
            icon.querySelector('circle').setAttribute('fill', '#f4f4f4');
            icon.querySelector('rect').setAttribute('fill', '#222');
          } else {
            icon.querySelector('circle').setAttribute('stroke', '#222');
            icon.querySelector('circle').setAttribute('fill', '#222');
            icon.querySelector('rect').setAttribute('fill', '#fff');
          }
        }
    }
    function getSystemTheme() {
        return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'theme-dark' : 'theme-light';
    }
    // On load: use localStorage or system preference
    const savedTheme = localStorage.getItem('theme');
    const initialTheme = savedTheme || getSystemTheme();
    setTheme(initialTheme);
    // Toggle button
    document.getElementById('theme-toggle-btn').onclick = function() {
        const current = document.body.classList.contains('theme-dark') ? 'theme-dark' : 'theme-light';
        const next = current === 'theme-dark' ? 'theme-light' : 'theme-dark';
        setTheme(next);
        localStorage.setItem('theme', next);
    };
    // Listen for system theme changes if user hasn't chosen
    if (!savedTheme) {
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            setTheme(e.matches ? 'theme-dark' : 'theme-light');
        });
    }
    </script>
</body>
</html>
